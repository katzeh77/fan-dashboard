<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aquarium LED Dashboard</title>
<style>
body {
  background:#121212;
  color:white;
  font-family:Arial, sans-serif;
  margin:0;
  padding:0;
}
.container {
  width:90%;
  max-width:1000px;
  margin:20px auto;
}
.header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}
.header select {
  background:#222;
  color:white;
  border:1px solid #444;
  padding:5px;
  border-radius:5px;
}
.section {
  background:#1e1e1e;
  padding:15px;
  border-radius:10px;
  box-shadow:0 0 8px rgba(255,255,255,0.1);
  margin-bottom:15px;
}
.section h2 {
  font-size:18px;
  margin-top:0;
  border-bottom:1px solid #333;
  padding-bottom:5px;
}
.status-grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:10px;
}
.status-item {
  background:#222;
  padding:8px;
  border-radius:8px;
  text-align:center;
}
.slider-container {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:10px;
}
.slider {
  background:#222;
  padding:10px;
  border-radius:8px;
  text-align:center;
}
.slider input[type=range] {
  width:90%;
}
#auto-container {
  overflow-x:auto;
  white-space:nowrap;
}
#auto-table {
  border-collapse:collapse;
  width:100%;
  min-width:800px;
  font-size:14px;
}
#auto-table th,#auto-table td {
  border:1px solid #444;
  padding:4px 8px;
  text-align:center;
}
button {
  background:#333;
  color:white;
  border:none;
  padding:8px 15px;
  border-radius:6px;
  cursor:pointer;
  margin-top:8px;
}
button:hover {
  background:#555;
}
canvas {
  width:100%;
  max-height:250px;
}

/* ====== RESPONSIVE FIX UNTUK HP ====== */
@media (max-width: 768px) {
  body {
    font-size: 14px;
    padding: 5px;
  }

  .container {
    width: 100% !important;
    margin: 0;
    padding: 8px;
    box-sizing: border-box;
  }

  .section {
    width: 100% !important;
    margin-bottom: 15px;
    overflow-x: auto;
  }

  table, th, td {
    font-size: 12px;
  }

  #auto-container {
    overflow-x: auto;
    white-space: nowrap;
  }

  canvas {
    width: 100% !important;
    height: auto !important;
  }

  input[type=range] {
    width: 90% !important;
  }

  select, button {
    width: 100%;
    margin-top: 6px;
  }
}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>LED Dashboard</h1>
    <div>
      Mode: 
      <select id="mode">
        <option value="manual">Manual</option>
        <option value="auto">Otomatis</option>
      </select>
    </div>
  </div>

  <div class="section">
    <h2>Status Suhu & Sistem</h2>
    <div class="status-grid">
      <div class="status-item">NTC1: <span id="ntc1">--</span> °C</div>
      <div class="status-item">NTC2: <span id="ntc2">--</span> °C</div>
      <div class="status-item">Suhu Maks: <span id="maxTemp">49</span> °C</div>
      <div class="status-item">Koneksi: <span id="status">Menunggu...</span></div>
    </div>
  </div>

  <div class="section">
    <h2>Manual Control</h2>
    <div class="slider-container">
      <div class="slider">Royal Blue<br><input type="range" id="ch1" min="0" max="100" value="0"></div>
      <div class="slider">Blue<br><input type="range" id="ch2" min="0" max="100" value="0"></div>
      <div class="slider">Violet<br><input type="range" id="ch3" min="0" max="100" value="0"></div>
      <div class="slider">Red<br><input type="range" id="ch4" min="0" max="100" value="0"></div>
      <div class="slider">Green<br><input type="range" id="ch5" min="0" max="100" value="0"></div>
      <div class="slider">White<br><input type="range" id="ch6" min="0" max="100" value="0"></div>
      <div class="slider">Sump<br><input type="range" id="ch7" min="0" max="100" value="0"></div>
      <div class="slider">Fan<br><input type="range" id="ch8" min="0" max="100" value="0"></div>
    </div>
  </div>

  <div class="section">
    <h2>Grafik Suhu</h2>
    <canvas id="tempChart"></canvas>
  </div>

  <div class="section">
    <h2>Jadwal Otomatis</h2>
    <div id="auto-container">
      <table id="auto-table">
        <thead>
          <tr>
            <th>Jam</th>
            <th>Royal Blue</th>
            <th>Blue</th>
            <th>Violet</th>
            <th>Red</th>
            <th>Green</th>
            <th>White</th>
            <th>Sump</th>
            <th>Fan</th>
          </tr>
        </thead>
        <tbody id="scheduleBody"></tbody>
      </table>
    </div>
    <button id="startAuto">Start Otomatis</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const modeSelect=document.getElementById('mode');
const sliders=document.querySelectorAll('input[type=range]');
modeSelect.addEventListener('change',()=>{
  const auto=modeSelect.value==='auto';
  sliders.forEach(s=>s.disabled=auto);
});

// Dummy suhu (simulasi)
let temp1=28, temp2=27;
function updateTemp(){
  temp1+=(Math.random()-0.5)*0.2;
  temp2+=(Math.random()-0.5)*0.2;
  document.getElementById('ntc1').textContent=temp1.toFixed(1);
  document.getElementById('ntc2').textContent=temp2.toFixed(1);
}
setInterval(updateTemp,1000);

// Grafik suhu
const ctx=document.getElementById('tempChart');
const chart=new Chart(ctx,{
  type:'line',
  data:{
    labels:[],
    datasets:[
      {label:'NTC1',data:[],borderColor:'aqua',fill:false},
      {label:'NTC2',data:[],borderColor:'lime',fill:false}
    ]
  },
  options:{
    scales:{y:{beginAtZero:false}},
    animation:false
  }
});
let time=0;
setInterval(()=>{
  time++;
  if(chart.data.labels.length>30){
    chart.data.labels.shift();
    chart.data.datasets[0].data.shift();
    chart.data.datasets[1].data.shift();
  }
  chart.data.labels.push(time);
  chart.data.datasets[0].data.push(temp1.toFixed(1));
  chart.data.datasets[1].data.push(temp2.toFixed(1));
  chart.update();
},2000);

// Jadwal otomatis (07:00–16:00 setiap 30 menit)
const scheduleBody=document.getElementById('scheduleBody');
for(let h=7;h<=16;h++){
  for(let m=0;m<60;m+=30){
    const tr=document.createElement('tr');
    const jam=`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}`;
    tr.innerHTML=`<td>${jam}</td>`+Array(8).fill('<td><input type="number" min="0" max="100" value="0" style="width:50px;background:#222;color:white;border:1px solid #444;border-radius:4px;text-align:center;"></td>').join('');
    scheduleBody.appendChild(tr);
  }
}
document.getElementById('startAuto').addEventListener('click',()=>{
  alert('Mode otomatis dimulai!');
});
</script>
</body>
</html>
